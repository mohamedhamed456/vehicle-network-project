! ======(CAR01)=================
!======== Router Configuration========
conf t
! Enable routing
ip routing

! ===== VLAN 10 =====
interface GigabitEthernet0/0.10
 encapsulation dot1q 10
 ip address 10.10.10.1 255.255.255.0

! ===== VLAN 20 =====
interface GigabitEthernet0/0.20
 encapsulation dot1q 20
 ip address 10.10.20.1 255.255.255.0

! ===== VLAN 30 =====
interface GigabitEthernet0/0.30
 encapsulation dot1q 30
 ip address 10.10.30.1 255.255.255.0

! ===== VLAN 40 =====
interface GigabitEthernet0/0.40
 encapsulation dot1q 40
 ip address 10.10.40.1 255.255.255.0

! Set the physical interface
interface GigabitEthernet0/0
 no shutdown
 do wr
==================================================
!============ACL Design=========
ip access-list extended ACL_V10_IN
 permit icmp 10.10.10.0 0.0.0.255 10.10.20.0 0.0.0.255 echo-reply
 deny ip 10.10.10.0 0.0.0.255 10.10.20.0 0.0.0.255
 deny ip 10.10.10.0 0.0.0.255 10.10.30.0 0.0.0.255
 deny ip 10.10.10.0 0.0.0.255 10.10.40.0 0.0.0.255
 permit ip any any
!
interface g0/0.10
 ip access-group ACL_V10_IN in
!
!
ip access-list extended ACL_V20_IN
 permit ip 10.10.20.0 0.0.0.255 10.10.10.0 0.0.0.255
 deny ip 10.10.10.0 0.0.0.255 10.10.20.0 0.0.0.255
 deny ip 10.10.20.0 0.0.0.255 10.10.30.0 0.0.0.255
 deny ip 10.10.20.0 0.0.0.255 10.10.40.0 0.0.0.255
 permit ip any any
!
interface g0/0.20
 ip access-group ACL_V20_IN in
!
!
ip access-list extended ACL_V30_IN
 deny ip 10.10.30.0 0.0.0.255 10.10.10.0 0.0.0.255
 deny ip 10.10.10.0 0.0.0.255 10.10.30.0 0.0.0.255
 deny ip 10.10.30.0 0.0.0.255 10.10.20.0 0.0.0.255
 deny ip 10.10.20.0 0.0.0.255 10.10.30.0 0.0.0.255
 deny ip any 10.10.40.0 0.0.0.255
 permit ip any any
!
interface g0/0.30
 ip access-group ACL_V30_IN in
!
!

ip access-list extended ACL_V40_IN
 permit ip 10.10.40.0 0.0.0.255 host 10.10.40.1
 deny ip any 10.10.40.0 0.0.0.255
 permit ip any any
end

!==========================QOS=============
